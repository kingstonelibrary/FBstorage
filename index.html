<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-app.js"></script>
<!-- <script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-functions.js"></script> -->
<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase-storage.js"></script>

</head>
<body>
  <label for="avatar">ファイル選択</label>
  <input type="file" id="avatar" name="avatar" accept="image/png, image/jpeg">
  <button id="upload">送信</button><br><br><br>
  <div id="imgUpload"></div>

  <script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyAmWtMB4M-OLI41PIEsg_thu8cBZD7aWm8",
      authDomain: "fir-push-44665.firebaseapp.com",
      databaseURL: "https://fir-push-44665.firebaseio.com",
      projectId: "fir-push-44665",
      storageBucket: "fir-push-44665.appspot.com",
      messagingSenderId: "1055939160518"
    };
    firebase.initializeApp(config);
  </script>
  <script>
    document.getElementById('upload').addEventListener('click', ()=>{
        var files = document.getElementById('avatar').files;
        var image = files[0];

        var ref = firebase.storage().ref().child(image.name);
        ref.put(image).then((snapshot) => {
            ref.getDownloadURL()
            .then((url)=>{
                document.getElementById('imgUpload').setAttribute("src", url);
            }) 
        })
    })
  </script>
</body>
</html>